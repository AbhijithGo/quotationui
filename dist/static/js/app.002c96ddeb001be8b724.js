webpackJsonp([1],{"4bq+":function(t,e){},"9M+g":function(t,e){},"9hGG":function(t,e){},AGL3:function(t,e,s){t.exports=s.p+"static/img/user.8e52b8c.png"},BUVG:function(t,e){},C6qg:function(t,e){},Hwzw:function(t,e){},IWvO:function(t,e){},Jmt5:function(t,e){},MCm5:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("//Fk"),i=s.n(a),o=s("7+uW"),n=s("Dd8w"),r=s.n(n),c=s("NYxO"),l=s("mtWM"),u=s.n(l),d={methods:r()({},Object(c.b)(["fetchAccessToken","fetchUserId","fetchCompanies"]),{setLoading:function(t){t?(this.refCount++,this.isLoading=!0):this.refCount>0&&(this.refCount--,this.isLoading=this.refCount>0)},closeLoading:function(){this.setLoading(!1)}}),data:function(){return{refCount:0,isLoading:!1,forceCloseLoading:!0}},created:function(){var t=this;this.fetchAccessToken(),this.fetchUserId(),u.a.interceptors.request.use(function(e){return t.setLoading(!0),e},function(e){return t.setLoading(!1),i.a.reject(e)}),u.a.interceptors.response.use(function(e){return t.setLoading(!1),e},function(e){return t.setLoading(!1),i.a.reject(e)})}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isLoading?e("div",{staticClass:"loading_parent"},[e("b-icon",{staticClass:"customXIcon",attrs:{icon:"x-square"},on:{click:this.closeLoading}}),this._v(" "),this._m(0)],1):this._e(),this._v(" "),e("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading_cont"},[e("div",[this._v("Loading")]),this._v(" "),e("div",{staticClass:"lds-ellipsis"},[e("div"),e("div"),e("div"),e("div")])])}]};var p=s("VU/8")(d,m,!1,function(t){s("Z6Y9")},"data-v-9d0de6ce",null).exports,h=s("/ocq"),v={data:function(){return{}},created:function(){},methods:{toggleClass:function(t){this.$store.dispatch("selectPageAction",t)}},props:{showSideBar:Boolean},components:{},computed:{auth:function(){return this.$store.getters.isAuthenticated}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar"},[s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"logo"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[s("span",{staticClass:"link-text logo-text"},[t._v("Widgetor")]),t._v(" "),s("svg",{staticClass:"svg-inline--fa fa-angle-double-right fa-w-14 fa-5x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fad","data-icon":"angle-double-right",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94 23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1 0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94 23.94 0 0 1 .1 34z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224 386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94 0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24 0 0 1-.11 34z"}})])])])]),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[0].bool},on:{click:function(e){return t.toggleClass(0)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[s("svg",{staticClass:"svg-inline--fa fa-home fa-w-18 fa-9x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"home",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Home")])])],1),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[1].bool},on:{click:function(e){return t.toggleClass(1)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/products"}},[s("svg",{staticClass:"svg-inline--fa fa-shopping-cart fa-w-16 fa-9x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"shopping-cart",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Products")])])],1),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[2].bool},on:{click:function(e){return t.toggleClass(2)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/customers"}},[s("svg",{staticClass:"svg-inline--fa fa-users fa-w-20 fa-9x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"users",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Customers")])])],1),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[3].bool},on:{click:function(e){return t.toggleClass(3)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/quotations"}},[s("svg",{staticClass:"svg-inline--fa fa-file-contract fa-w-12 fa-6x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"file-contract",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Estimates")])])],1),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[4].bool},on:{click:function(e){return t.toggleClass(4)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/services"}},[s("svg",{staticClass:"svg-inline--fa fa-briefcase fa-w-16 fa-9x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"briefcase",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Services")])])],1),t._v(" "),s("li",{staticClass:"nav-item",class:{active:this.$store.state.isActive[5].bool},on:{click:function(e){return t.toggleClass(5)}}},[s("router-link",{staticClass:"nav-link",attrs:{to:"/salesmen"}},[s("svg",{staticClass:"svg-inline--fa fa-male fa-w-6 fa-9x",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"male",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"}},[s("g",{staticClass:"fa-group"},[s("path",{staticClass:"fa-secondary",attrs:{fill:"currentColor",d:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"}}),t._v(" "),s("path",{staticClass:"fa-primary",attrs:{fill:"currentColor",d:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"}})])]),t._v(" "),s("span",{staticClass:"link-text"},[t._v("Salesmen")])])],1)])])},staticRenderFns:[]};var _=s("VU/8")(v,f,!1,function(t){s("qoxp")},"data-v-642949de",null).exports,b={data:function(){return{image:s("AGL3"),showDropdown:!1,companies:[],showModal:!1,activeCompany:"",name:"",isValid:!1}},mounted:function(){this.isTokenAvailable()},props:{addCompany:Boolean},methods:{isTokenAvailable:function(){var t=this;setTimeout(function(){null!=t.$store.state.user.token?t.isValid=!0:t.$router.push("/")},1e3)},toggle:function(){console.log("in toggle"),this.showDropdown=!this.showDropdown,0===this.$store.state.user.company.length&&(this.$store.state.user.company=JSON.parse(localStorage.companies)),this.companies=this.$store.state.user.company,this.name=this.$store.state.user.firstName},addComp:function(){this.showDropdown=!this.showDropdown,this.addCompany=!this.addCompany,this.$emit("createOccured",this.addCompany),this.$router.push("/addcompany")},onLogout:function(){this.$store.dispatch("logout")},switchCompany:function(t){this.$store.dispatch("switch",t)},isActive:function(t,e){return 0===e&&""===this.$store.state.user.activeCompany||t.company_name===this.$store.state.user.activeCompany}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-navbar",{staticClass:"header_navbar",attrs:{toggleable:"lg",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{href:"#"}},[t._v("Widgetor")]),t._v(" "),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t._v(" "),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-text",{attrs:{right:""}},[t._v("Profile")]),t._v(" "),s("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("span",{on:{click:t.toggle}},[s("em",[s("a",{staticClass:"dropdown",attrs:{"data-toggle":"dropdown",role:"button",href:"#"}},[s("img",{staticClass:"img-circle top-avatar",attrs:{src:t.image,height:"40",width:"40",alt:"avatar"}})])])])]},proxy:!0}])},[t._v(" "),s("b-dropdown-item",{staticClass:"dropdown-item",attrs:{href:"#"}},[s("img",{staticClass:"profile-image img-circle",attrs:{src:t.image,alt:"Profile Image",height:"100",width:"100"}})]),t._v(" "),s("b-dropdown-item",{staticClass:"dropdown-item"},[s("div",{staticClass:"account-info"},[s("h4",[t._v(t._s(t.name))]),t._v(" "),t._l(t.companies,function(e,a){return s("span",{key:a},[t.isActive(e,a)?s("a",{staticClass:"companylink",attrs:{href:"#",id:e.company_name},on:{click:function(s){return t.switchCompany(e.company_name)}}},[s("h6",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-bottom":"0",color:"green","font-weight":"bold"}},[s("b-icon",{staticStyle:{"margin-left":"-26px"},attrs:{icon:"check-circle","font-scale":"2.5"}}),t._v("\n                    "+t._s(e.company_name.toUpperCase())+"\n                  ")],1)]):s("a",{staticClass:"companylink",attrs:{href:"#",id:e.company_name},on:{click:function(s){return t.switchCompany(e.company_name)}}},[s("h6",[t._v(t._s(e.company_name.toUpperCase()))])])])}),t._v(" "),s("a",{attrs:{href:"#"},on:{click:function(e){return t.addComp()}}},[t._v("Create a new company")])],2)]),t._v(" "),s("hr"),t._v(" "),s("b-dropdown-item",{attrs:{href:"#"}},[s("div",{staticClass:"account-actions"},[s("a",{staticClass:"btn btn-default btn-block btn-flat",attrs:{id:"logout",href:"#"},on:{click:function(e){return t.onLogout()}}},[t._v("Logout")])])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var C=s("VU/8")(b,g,!1,function(t){s("9hGG")},"data-v-29c073a8",null).exports,w={data:function(){return{}},created:function(){},methods:{toggleClass:function(t){this.$store.dispatch("selectPageAction",t)}},props:{showSideBar:Boolean},components:{},computed:{auth:function(){return this.$store.getters.isAuthenticated}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"sidebar iconic"},[s("ul",{staticClass:"iconic-left-sidebar-scroll",staticStyle:{overflow:"hidden",outline:"none",height:"474px"},attrs:{tabindex:"5000"}},[s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[0].bool},on:{click:function(e){return t.toggleClass(0)}}},[s("router-link",{attrs:{to:"/home"}},[s("i",{staticClass:"glyphicon glyphicon glyphicon-home"})])],1),t._v(" "),s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[1].bool},on:{click:function(e){return t.toggleClass(1)}}},[s("router-link",{attrs:{to:"/products"}},[s("i",{staticClass:"glyphicon glyphicon-shopping-cart"})])],1),t._v(" "),s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[2].bool},on:{click:function(e){return t.toggleClass(2)}}},[s("router-link",{attrs:{to:"/customers"}},[s("i",{staticClass:"glyphicon glyphicon-user"})])],1),t._v(" "),s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[3].bool},on:{click:function(e){return t.toggleClass(3)}}},[s("router-link",{attrs:{to:"/quotations"}},[s("i",{staticClass:"glyphicon glyphicon-file"})])],1),t._v(" "),s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[4].bool},on:{click:function(e){return t.toggleClass(4)}}},[s("router-link",{attrs:{to:"/services"}},[s("i",{staticClass:"glyphicon glyphicon-link"})])],1),t._v(" "),s("li",{staticClass:"has-child",class:{active:this.$store.state.isActive[5].bool},on:{click:function(e){return t.toggleClass(5)}}},[s("router-link",{attrs:{to:"/salesmen"}},[s("i",{staticClass:"glyphicon glyphicon-briefcase"})])],1)]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nicescroll-rails",staticStyle:{width:"3px","z-index":"998",cursor:"default",position:"absolute",top:"0px",left:"0px",height:"474px",opacity:"0"},attrs:{id:"ascrail2000"}},[e("div",{staticStyle:{position:"relative",top:"0px",float:"right",width:"3px",height:"269px","background-color":"rgb(72, 71, 71)",border:"0px solid rgb(255, 255, 255)","background-clip":"padding-box","border-radius":"0px"}})])}]};var S={name:"Company",data:function(){return{companies:[]}},components:{Sidebar:s("VU/8")(w,y,!1,function(t){s("C6qg")},"data-v-6d8e0920",null).exports},mounted:function(){this.companies=this.$store.getters.sendCompanies},created:function(){},methods:{addCompany:function(){this.$store.dispatch("addCom",{newcompany:"Tata"}),this.companies=this.$store.getters.sendCompanies}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"company"},[s("b-container",{staticClass:"card companyContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-3"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Your Companies")])])],1),t._v(" "),s("b-container",{staticClass:"card companyContainer",attrs:{fluid:""}},t._l(t.companies,function(e,a){return s("b-row",{key:a},[s("ul",{attrs:{id:"example-2"}},[s("li",[t._v("\r\n    "+t._s(e.company_name.toUpperCase())+"\r\n    ")])])])}),1)],1)},staticRenderFns:[]};var k=s("VU/8")(S,x,!1,function(t){s("wERl")},"data-v-15de0498",null).exports,D={data:function(){return{newCom:"",isSucess:!1}},watch:{isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){return e.isSucess=!1},1500),this.$router.go(0))}},methods:{addCompany:function(){var t=this;u.a.post("/users/new_company/",{company:this.newCom},{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.isSucess=!0}).catch(function(t){return console.log.error})}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addcompany"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add a new Company")])])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:""}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"4"}},[s("label",{staticClass:"label"},[t._v("\n          Company Name:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"cname",type:"text",placeholder:"Company Name.."},model:{value:t.newCom,callback:function(e){t.newCom=e},expression:"newCom"}}),t._v(" "),s("b-button",{attrs:{pill:"",variant:"warning",size:"sm",block:"",width:"50%"},on:{click:function(e){return t.addCompany()}}},[t._v("Create")])],1)],1),t._v(" "),s("b-row",[s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isSucess?s("div",{staticClass:"alert",attrs:{role:"alert"}},[t._v("\n          Company is successfully added!\n        ")]):t._e()])],1)],1)],1)},staticRenderFns:[]};var T=s("VU/8")(D,$,!1,function(t){s("nkgR")},"data-v-51853ac4",null).exports,B={name:"Home",created:function(){u.a.defaults.baseURL="http://"+localStorage.activeCompany+".widgetor.com/quotation",this.$store.dispatch("selectPageAction",0)},data:function(){return{welcome:"This is your profile",addComp:!1,name:""}},components:{Sidebar:_,Header:C,Company:k,AddCompany:T},mounted:function(){this.$store.state.user.firstName=localStorage.firstName,this.setName()},methods:{setName:function(){var t=this;setTimeout(function(){t.name=t.$store.state.user.firstName},1500)}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"home mainContentContainer"},[s("h2",{staticClass:"welcome"},[t._v("Welcome "+t._s(t.name))]),t._v(" "),t.addComp?s("AddCompany"):t._e()],1),t._v(" "),s("Sidebar")],1)},staticRenderFns:[]};var I=s("VU/8")(B,L,!1,function(t){s("ccfr")},null,null).exports,A=s("mvHQ"),E=s.n(A),N={data:function(){return{username:"",password:"",user:null,companyId:""}},computed:{getcompanyid:function(){return this.$store.getters.sendCompanies[0].company_id},auth:function(){return this.$store.getters.isAuthenticated}},methods:{toggle:function(){this.showSignUp=!this.showSignUp},onSubmit:function(){var t=this,e={username:this.username,password:this.password};u.a.post("/users/login/",{username:e.username,password:e.password}).then(function(e){localStorage.setItem("refreshToken",e.data.refresh_token),localStorage.setItem("accessToken",e.data.token),localStorage.setItem("loginToken",e.data.token),localStorage.setItem("userId",e.data.id),localStorage.setItem("firstName",e.data.first_name),localStorage.setItem("username",e.data.first_name),localStorage.setItem("isAdmin",e.data.is_admin),localStorage.setItem("companies",E()(e.data.companies)),t.$store.commit("loginStop",null),t.$store.commit("updateAccessToken",e.data.token),t.$store.commit("updateUserId",e.data.id),console.log("login res",e),t.$store.commit("authUser",{firstName:e.data.first_name,username:e.data.first_name,lastName:e.data.last_name,email:e.data.email,phoneNumber:e.data.phone_number,token:e.data.token,loginToken:e.data.token,isAdmin:e.data.is_admin,company:e.data.companies,userId:e.data.id,activeCompany:e.data.companies[0].company_name}),localStorage.setItem("activeCompany",e.data.companies[0].company_name),u.a.defaults.baseURL="http://"+e.data.companies[0].company_name+".widgetor.com/quotation",t.$store.dispatch("masterData",e.data.token),t.$router.push("/home"),t.$store.dispatch("selectPageAction",0)}).catch(function(e){console.log("logon faild"),console.log(e),t.$alert("Please enter valid username and password","Error","error")})}},mounted:function(){var t=this,e={refresh:localStorage.refreshToken};this.$store.state.user.token=localStorage.accessToken,u.a.get("/products/products/?pagesize=10",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.$store.dispatch("selectPageAction",1),t.$store.state.user.company=JSON.parse(localStorage.companies),t.$router.push("/products")}).catch(function(s){u.a.post("/users/token_refresh/",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$store.state.user.token=localStorage.accessToken,localStorage.accessToken=e.data.access,localStorage.loginToken=e.data.access,t.$router.push("/products")}).catch(function(t){console.log(t)})})}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5 mx-auto"},[s("div",{attrs:{id:"first"}},[s("div",{staticClass:"myform form "},[t._m(0),t._v(" "),s("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"username",id:"username",placeholder:"Enter username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",id:"password",placeholder:"Enter Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"form-group"},[s("p",{staticClass:"text-center"},[t._v("Don't have account? "),s("router-link",{attrs:{to:"/signup"}},[t._v("Sign up here")])],1)])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo mb-3"},[e("div",{staticClass:"col-md-12 text-center"},[e("h1",[this._v("Login")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 text-center "},[e("button",{staticClass:" btn btn-block mybtn btn-primary tx-tfm",attrs:{type:"submit"}},[this._v("Login")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 "},[e("div",{staticClass:"login-or"},[e("hr",{staticClass:"hr-or"}),this._v(" "),e("span",{staticClass:"span-or"},[this._v("or")])])])}]};var q=s("VU/8")(N,P,!1,function(t){s("4bq+")},null,null).exports,R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container  py-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5 mx-auto"},[s("div",{staticClass:"myform"},[t._m(0),t._v(" "),s("form",{attrs:{action:"#",name:"registration "},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("h4",{staticStyle:{}},[t._v("Your Details")]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Enter username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Enter Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("div",[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("First Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",id:"firstname",placeholder:"Enter First Name"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Last Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",id:"lastname",placeholder:"Enter Last Name"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email Address")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"Enter Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Phone Number")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],staticClass:"form-control",attrs:{type:"text",id:"phone",placeholder:"Enter Phone Number"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}})])]),t._v(" "),s("hr"),t._v(" "),s("div",[s("h4",[t._v("Company Details")]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-6"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Company Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],staticClass:"form-control",attrs:{type:"text",id:"companyname",placeholder:"Enter Company Name"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})])])])]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("p",{staticClass:"text-center"},[s("a",{attrs:{href:"#",id:"signin"}},[s("router-link",{attrs:{to:"/"}},[t._v("Already have an account?")])],1)])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo mb-3"},[e("div",{staticClass:"col-md-12 text-center"},[e("h1",[this._v("Register Now")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 text-center mb-3"},[e("button",{staticClass:"btn mybtn btn-primary tx-tfm",attrs:{type:"submit"}},[this._v("Register")])])}]};var z=s("VU/8")({data:function(){return{firstName:"",lastName:"",phoneNumber:"",username:"",email:"",password:"",companyName:""}},computed:{auth:function(){return this.$store.getters.isAuthenticated}},methods:{onSubmit:function(){this.$store.dispatch("signup",{username:this.username,password:this.password,companyName:this.companyName,firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNumber,email:this.email}),this.$router.push("/home")}}},R,!1,function(t){s("t0To")},null,null).exports,V=s("fZjL"),M=s.n(V),U=s("woOf"),H=s.n(U),F={name:"my-tour2",props:["editRowData","toggleRequest","tableData","visible","tour"],beforeDestroy:function(){this.$emit("resetVisible",!1)},mounted:function(){var t=this;if(1==this.tour&&this.$tours.myTour2.start(),window.addEventListener("keydown",function(e){"Enter"===e.key&&t.visible&&t.$refs.formSubmitBtnEStimates.click()}),this.$store.state.user.token=localStorage.accessToken,this.toggleRequest){this.eName=this.editRowData.quotation_name,this.eNumber=this.editRowData.quotation_id,this.eSubheading=this.editRowData.sub_heading,this.eFooter=this.editRowData.footer,this.eMemotext=this.editRowData.memo,this.ePoso=this.editRowData.po_so,this.eDate=this.editRowData.generated_date,this.eDate_expiry=this.editRowData.expiry_date,this.rows.length=0;for(var e=0;e<this.editRowData.quotation_products.length;e++)this.addRow();var s=this;this.editRowData.quotation_products.forEach(function(e,a){s.rows[a].itemTypedPicked=s.typeList.filter(function(t){return t[0]===e.item_type})[0],s.getselectedValue(a),s.rows[a].description=e.description,s.rows[a].itemSelected=e.item_code,s.rows[a].quantity=e.quantity,s.rows[a].price=e.price,s.rows[a].discount=e.discount,s.rows[a].unit=e.unit;s.rows[a].itemList.some(function(t){return t.text===s.editRowData.quotation_products[a].item_code})||("S"===e.item_type?s.rows[a].itemList.push({value:e.service,text:e.item_code,description:e.description,price:e.price,unit:e.unit}):s.rows[a].itemList.push({value:e.product,text:e.item_code,description:e.description,price:e.price,unit:e.unit})),"S"===e.item_type?(s.rows[a].disabledUnit=!0,s.rows[a].itemSelectedId=e.service):s.rows[a].itemSelectedId=e.product,t.calculateTotal(a)})}},created:function(){var t=this;u.a.get("customers/customers/",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.refelectIntoLocalVar(e)}).catch(function(e){t.$router.push("/"),console.log(e)}),this.toggleRequest?(this.$store.state.masterData[7].sales_persons.forEach(function(e){t.eSalesManList.push({value:e.id,text:e.sales_person_name})}),this.salesManListUpdate=!0):(this.eName=this.$store.state.masterData[0].settings.default_estimate_name,this.eNumber=this.tableData[0].next_estimate_no,this.eSubheading=this.$store.state.masterData[0].settings.default_sub_heading,this.eFooter=this.$store.state.masterData[0].settings.default_footer,this.eMemotext=this.$store.state.masterData[0].settings.default_memo,this.$store.state.masterData[7].sales_persons.forEach(function(e){t.eSalesManList.push({value:e.id,text:e.sales_person_name})}))},data:function(){return this.initialValues()},watch:{tour:function(t){},isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){return e.isSucess=!1},1500),this.$alert("Saved Estimate !!!!","Successfully","success").then(function(){e.$router.go()}))},editRowData:function(t){var e=this;if(this.toggleRequest){this.eName=t.quotation_name,this.eNumber=t.quotation_id,this.eSubheading=t.sub_heading,this.eFooter=t.footer,this.eMemotext=t.memo,this.ePoso=t.po_so,this.eDate=t.generated_date,this.eDate_expiry=t.expiry_date,this.editCustomer(),this.editsalesMan(),this.rows.length=0;for(var s=0;s<t.quotation_products.length;s++)this.addRow();var a=this;t.quotation_products.forEach(function(s,i){a.rows[i].itemTypedPicked=a.typeList.filter(function(t){return t[0]===s.item_type})[0],a.getselectedValue(i),a.rows[i].itemSelected=s.item_code,a.rows[i].description=s.description,a.rows[i].quantity=s.quantity,a.rows[i].price=s.price,a.rows[i].discount=s.discount,a.rows[i].unit=s.unit;a.rows[i].itemList.some(function(e){return e.text===t.quotation_products[i].item_code})||("S"===s.item_type?a.rows[i].itemList.push({value:s.service,text:s.item_code,description:s.description,price:s.price,unit:s.unit}):a.rows[i].itemList.push({value:s.product,text:s.item_code,description:s.description,price:s.price,unit:s.unit})),"S"===s.item_type?(a.rows[i].disabledUnit=!0,a.rows[i].itemSelectedId=s.service):a.rows[i].itemSelectedId=s.product,e.calculateTotal(i)})}},customerListUpdate:function(t){this.editCustomer()},salesManListUpdate:function(t){this.editsalesMan()}},methods:{select:function(t){this.rows[this.rowIndex].description=t.description,"services"===this.rows[this.rowIndex].itemTypedPicked.toLowerCase()?(this.rows[this.rowIndex].itemSelected=t.service_code,this.rows[this.rowIndex].unit="none"):(this.rows[this.rowIndex].itemSelected=t.item_code,this.rows[this.rowIndex].unit=t.unit.unit),this.rows[this.rowIndex].itemSelectedId=t.id,this.rows[this.rowIndex].quantity=1,this.rows[this.rowIndex].price=t.selling_price,this.calculateTotal(this.rowIndex),this.elasticSearch=!1,this.$modal.hide("dataTable")},toggleSearch:function(t){var e=this;""!==this.rows[t].itemSelected?(this.$modal.show("dataTable"),this.rowIndex=t,this.elasticSearch=!0,this.elasticTableData=[],"services"===this.rows[t].itemTypedPicked.toLowerCase()?this.columns=["service_code","description","selling_price","actions"]:this.columns=["item_code","description","selling_price","actions"],u.a.get("/products/"+this.rows[t].itemTypedPicked.toLowerCase()+"/?search="+this.rows[t].itemSelected,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(s){0===s.data.length?e.$alert("No results found!!!!","Error","error").then(function(){e.rows[t].description="",e.rows[t].quantity=0,e.rows[t].price=0,e.rows[t].unit="",e.rows[t].discount=0,e.rows[t].total=0,e.overSubAllTotal=0,e.overAllTotal=0,e.overAllDiscount=0,e.rows[t].itemSelectedId="",e.calculateTotal(t),e.$modal.hide("dataTable")}):(e.elasticTableData.length=0,e.elasticTableData=[],s.data.forEach(function(t){e.elasticTableData.push(t)}))}).catch(function(t){console.log(t)})):this.rows[t].searchBool=!0},validateEnum:function(){var t=this;this.presentIdBool=this.tableData.some(function(e){return e.quotation_id.toLowerCase()===t.eNumber.toLowerCase()})},editsalesMan:function(){var t=this;if(this.toggleRequest){this.eSalesManList.some(function(e){return e.value===t.editRowData.sale_person_str.id})?this.eSalesManSelected=this.editRowData.sale_person_str.id:(this.eSalesManList.push({value:this.editRowData.sale_person_str.id,text:this.editRowData.sale_person_str.sales_person_name}),this.eSalesManSelected=this.editRowData.sale_person_str.id)}},editCustomer:function(){var t=this;if(this.toggleRequest){this.customerList.some(function(e){return e.value===t.editRowData.customer})?(this.customerSelected=this.editRowData.customer_str,this.customerSelectedId=this.editRowData.customer):(this.customerList.push({value:this.editRowData.customer,text:this.editRowData.customer_str}),this.customerSelected=this.editRowData.customer_str,this.customerSelectedId=this.editRowData.customer)}},reset:function(t){var e=this;this.$confirm("Are you sure?","Warning","warning").then(function(){e.$emit("resetEvent",!1),t.preventDefault(),setTimeout(function(){H()(e.$data,e.initialValues()),H()(e.editRowData,e.initialValues()),e.disableInput=!1},5e3)})},initialValues:function(){return{steps:[{target:"#eName",content:"Enter An estimate Name",params:{placement:"right"}},{target:"#eNumber",content:"Enter an Estimate Number",params:{placement:"right"}},{target:"#eCustomer",content:"Select A customer from the dropdown once you start typing",params:{placement:"right"}},{target:"#edateCol",content:"Select an Invoice Date",params:{placement:"right"}},{target:"#eSubheading",content:"Select a Subheading for the estimate",params:{placement:"right"}},{target:"#ePoso",content:"P.O./S.O",params:{placement:"right"}},{target:"#eSalesMan",content:"Select a Salesman from the List",params:{placement:"right"}},{target:"#eDate_expiryCol",content:"Select an Expiry Date",params:{placement:"right"}},{target:"#footer",content:"Add/Edit Footer Text",params:{placement:"right"}},{target:"#memo",content:"Add/Edit Memo Text",params:{placement:"right"}}],rowIndex:null,elasticSearch:!1,columns:["item_code","description","selling_price","actions"],elasticTableData:[],options:{headings:{item_code:"Item Code",description:"Description",selling_price:"Selling Price"},sortable:["item_code","description","category_str","unit_str"],filterable:["item_code","description","category_str","unit_str"],texts:{filterPlaceholder:"Internal Table Search"}},addComp:!1,disableInput:this.toggleRequest,eName:"",eNumber:"",eDate:"",eDate_expiry:"",eMemotext:"",eSubheading:"",ePoso:"",eFooter:"",customerList:[],customerListBool:!1,customerSelected:"",customerSelectedId:"",eSalesManList:[],eSalesManSelected:"",min_eDate_expiry:"",max_eDate_expiry:"",errorBool:null,eDateBool:null,show:!1,typeList:["Products","Services"],rows:[{itemTypedPicked:"",itemTypedPickedBool:!1,itemList:[],itemSelected:"",itemSelectedId:"",itemListBool:!1,searchBool:!1,description:"",quantity:0,price:0,discount:0,unit:"",disabledUnit:!1,total:0}],overSubAllTotal:0,overAllDiscount:0,overAllTotal:0,isSucess:!1,customerListUpdate:!1,salesManListUpdate:!1,serviceListUpdate:!1,productListUpdate:!1,presentIdBool:!1}},save:function(){this.postQuotaion()},findId:function(t,e){t.forEach(function(t){if(t.text===e)return t.value})},quotation_products_obj:function(){return this.rows.map(function(t){return"S"===t.itemTypedPicked[0].toUpperCase()?{item_type:t.itemTypedPicked[0].toUpperCase(),description:t.description,quantity:t.quantity,price:Number(t.price),discount:Number(t.discount),unit:t.unit,product:null,service:t.itemSelectedId}:{item_type:t.itemTypedPicked[0].toUpperCase(),description:t.description,quantity:t.quantity,price:Number(t.price),discount:Number(t.discount),unit:t.unit,product:t.itemSelectedId,service:null}})},postQuotaion:function(){var t=this,e=this.rows.some(function(t){return""===t.itemTypedPicked}),s=this.rows.some(function(t){return""===t.itemSelected});if(0===this.overAllTotal||!1!==this.presentIdBool||""===this.customerSelected||""===this.eDate||""===this.eDate_expiry||""===this.eSalesManSelected||e||s)""===this.eDate&&(this.eDateBool=!1,alert("Date is not Selected !!!!")),""===this.eDate_expiry&&(this.errorBool=!1,alert("Expiry Date is not Selected !!!!")),0===this.overAllTotal&&alert("Total should not be zero !!!!"),this.presentIdBool&&alert("Estimate number should not be same !!!!");else{var a={sale_person:Number(this.eSalesManSelected),quotation_products:this.quotation_products_obj(),quotation_id:this.eNumber,generated_date:this.eDate,expiry_date:this.eDate_expiry,po_so:this.ePoso,quotation_name:this.eName,sub_heading:this.eSubheading,footer:this.eFooter,memo:this.eMemotext,currency:"QAR",customer:Number(this.customerSelectedId)};this.toggleRequest?u.a.put("quotes/quotations/"+this.editRowData.id+"/",a,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.isSucess=!0}).catch(function(t){console.log(t)}):u.a.post("quotes/quotations/",a,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.isSucess=!0}).catch(function(t){console.log(t)})}},deleteRow:function(t){1!==this.rows.length&&this.rows.splice(t,1)},addRow:function(){this.rows.push({itemTypedPicked:"",itemList:[],itemSelected:"",itemSelectedId:"",itemListBool:!1,description:"",quantity:0,price:0,discount:0,unit:"",disabledUnit:!1,total:0})},itemFilteredList:function(t,e){var s=this;return t.filter(function(t){return t.text.toLowerCase().indexOf(s.rows[e].itemSelected.toLowerCase())>=0})},itemChangeInput:function(t){""===this.rows[t].itemTypedPicked&&(this.rows[t].itemTypedPickedBool=!0),this.rows[t].itemSelected.length>0&&(this.rows[t].searchBool=!1),2===this.rows[t].itemSelected.length?this.rows[t].itemListBool=!0:this.rows[t].itemSelected.length<2&&(this.rows[t].itemListBool=!1)},itemSelectOption:function(t,e){this.rows[e].itemSelected=t.text,this.rows[e].itemSelectedId=t.value,this.rows[e].itemListBool=!1,this.getItemDetails(t,e)},filteredList:function(t){var e=this;return t.filter(function(t){return t.text.toLowerCase().indexOf(e.customerSelected.toLowerCase())>=0})},changeInp:function(){this.customerSelected.length>1?this.customerListBool=!0:this.customerListBool=!1},selectOption:function(t){this.customerSelected=t.text,this.customerSelectedId=t.value,this.customerListBool=!1},anywhereClick:function(){this.customerListBool=!1,this.rows.forEach(function(t){t.itemListBool=!1})},DateValidation:function(){this.min_eDate_expiry=new Date(this.eDate),""!==this.eDate_expiry&&(new Date(this.eDate_expiry).getDate()<new Date(this.eDate).getDate()||new Date(this.eDate_expiry).getMonth()<new Date(this.eDate).getMonth()||new Date(this.eDate_expiry).getFullYear()<new Date(this.eDate).getFullYear())?(this.errorBool=!1,this.show=!0):(this.errorBool=null,this.eDateBool=null,this.show=!1)},expDateValidation:function(){""!==this.eDate&&(new Date(this.eDate_expiry).getDate()>new Date(this.eDate).getDate()||new Date(this.eDate_expiry).getMonth()>new Date(this.eDate).getMonth()||new Date(this.eDate_expiry).getFullYear()>new Date(this.eDate).getFullYear())&&(this.errorBool=null,this.eDateBool=null,this.show=!1)},getselectedValue:function(t){var e=this,s=this.rows[t].itemTypedPicked;this.rows[t].itemTypedPickedBool=!1,this.rows[t].description="",this.rows[t].quantity=0,this.rows[t].price=0,this.rows[t].unit="",this.rows[t].discount=0,this.rows[t].total=0,this.overSubAllTotal=0,this.overAllTotal=0,this.overAllDiscount=0,this.rows[t].itemSelected="",this.rows[t].itemSelectedId="",u.a.get("products/"+s.toLowerCase()+"/?pagesize=50",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(a){e.rows[t].itemList.length=0,"services"===s.toLowerCase()?(e.rows[t].disabledUnit=!0,a.data.forEach(function(s){e.rows[t].itemList.push({value:s.id,text:s.service_code,description:s.description,price:s.selling_price,unit:"none"})})):(e.rows[t].disabledUnit=!1,a.data.forEach(function(s){e.rows[t].itemList.push({value:s.id,text:s.item_code,description:s.description,price:s.selling_price,unit:s.unit_str})}))}).catch(function(t){console.log(t)}),this.calculateTotal(t)},refelectIntoLocalVar:function(t){var e=this;t.data.forEach(function(t){e.customerList.push({value:t.id,text:t.customer_name})}),this.customerListUpdate=!0},calculateTotal:function(t){Number(this.rows[t].discount)>100&&(this.rows[t].discount=100),Number(this.rows[t].discount)<0&&(this.rows[t].discount=0);var e=Number(this.rows[t].quantity)*(Number(this.rows[t].price)/100*Number(this.rows[t].discount));this.rows[t].total=Number(this.rows[t].price)*Number(this.rows[t].quantity)-e,this.rows[t].total=this.rows[t].total.toFixed(2),this.calcOverAllTotal()},calcOverAllTotal:function(){var t=this;Number(this.overSubAllTotal),Number(this.overAllDiscount),Number(this.overAllTotal),this.overSubAllTotal=0,this.overAllTotal=0,this.overAllDiscount=0,this.rows.forEach(function(e){t.overSubAllTotal+=Number(e.quantity)*Number(e.price),t.overAllDiscount+=Number(e.quantity*(e.price/100*e.discount))}),this.overAllTotal=Number(this.overSubAllTotal)-Number(this.overAllDiscount),this.overSubAllTotal=this.overSubAllTotal.toFixed(2),this.overAllTotal=this.overAllTotal.toFixed(2),this.overAllDiscount=this.overAllDiscount.toFixed(2)},getItemDetails:function(t,e){this.rows[e].description=t.description,this.rows[e].quantity=1,this.rows[e].price=t.price,this.rows[e].unit=t.unit,this.rows[e].discount=0,this.calculateTotal(e)},findByMatchingProperties:function(t,e,s){return t.filter(function(t){return M()(e).every(function(e){return t[e]===s})})}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{click:t.anywhereClick}},[s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add an Estimate")])])],1),t._v(" "),s("form",[s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"ename_enum_container"}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"4"}},[s("label",{staticClass:"label",attrs:{id:"estimateName"}},[t._v("\n          Estimate Name:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("label",{staticClass:"inputContainer"},[s("b-icon",{staticClass:"docIcon",attrs:{icon:"document-richtext"}}),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"eName",type:"text",placeholder:"Estimate Name..",required:""},model:{value:t.eName,callback:function(e){t.eName=e},expression:"eName"}})],1)]),t._v(" "),s("b-col",{attrs:{sm:"4"}},[s("label",{staticClass:"label",attrs:{id:"estimateNumber"}},[t._v("\n          Estimate number:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("label",{staticClass:"inputContainer"},[s("b-icon",{staticClass:"docIcon",attrs:{icon:"document-richtext"}}),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"eNumber",type:"text",placeholder:"Estimate number..",disabled:t.disableInput,required:""},on:{change:t.validateEnum},model:{value:t.eNumber,callback:function(e){t.eNumber=e},expression:"eNumber"}}),t._v(" "),t.presentIdBool?s("div",{staticClass:"dateError"},[t._v("This Estimate no. is present, pls input another.")]):t._e()],1)])],1)],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"eDetails"}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Customer:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"eCustomer",type:"text",placeholder:"Type Customer name...",required:""},on:{input:t.changeInp},model:{value:t.customerSelected,callback:function(e){t.customerSelected=e},expression:"customerSelected"}}),t._v(" "),t.customerListBool?[s("div",{staticClass:"dropdown-content"},t._l(t.filteredList(t.customerList),function(e,a){return s("div",{key:a+"af",staticClass:"dropdown-item",on:{mousedown:function(s){return t.selectOption(e)}}},[t._v(t._s(e.text||e.id||"-"))])}),0)]:t._e()],2),t._v(" "),s("b-col",{attrs:{sm:"3",id:"edateCol"}},[s("label",{staticClass:"label"},[t._v("\n          Date:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-datepicker",{staticClass:"rowInput",attrs:{size:"md",id:"eDate",locale:"en",state:t.eDateBool},on:{input:t.DateValidation},model:{value:t.eDate,callback:function(e){t.eDate=e},expression:"eDate"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Subheading:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"eSubheading",type:"text",placeholder:"Subheading..",required:""},model:{value:t.eSubheading,callback:function(e){t.eSubheading=e},expression:"eSubheading"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("P.O./S.O.:")]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"ePoso",type:"text",placeholder:"P.O./S.O.."},model:{value:t.ePoso,callback:function(e){t.ePoso=e},expression:"ePoso"}})],1)],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Sales Man:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{id:"eSalesMan",options:t.eSalesManList,required:"",placeholder:"Sales Man.."},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select a SalesMan --")])]},proxy:!0}]),model:{value:t.eSalesManSelected,callback:function(e){t.eSalesManSelected=e},expression:"eSalesManSelected"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3",id:"eDate_expiryCol"}},[s("label",{staticClass:"label"},[t._v("\n          Expiry Date:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-datepicker",{staticClass:"rowInput",attrs:{size:"md",state:t.errorBool,id:"eDate_expiry",min:t.min_eDate_expiry,max:t.max_eDate_expiry,locale:"en"},on:{input:t.expDateValidation},model:{value:t.eDate_expiry,callback:function(e){t.eDate_expiry=e},expression:"eDate_expiry"}}),t._v(" "),t.show?s("div",{staticClass:"dateError"},[t._v("Invalid Date, pls select correct expiry date !!!")]):t._e()],1),t._v(" "),s("b-col",{attrs:{sm:"3",id:"footer"}},[s("label",{staticClass:"label"},[t._v("\n          Footer:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-textarea",{attrs:{id:"memotextarea_1",required:"",placeholder:"Footer..","max-rows":"3"},model:{value:t.eFooter,callback:function(e){t.eFooter=e},expression:"eFooter"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3",id:"memo"}},[s("label",{staticClass:"label"},[t._v("\n          Memo:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-textarea",{attrs:{id:"memotextarea_2",required:"",placeholder:"Memo...","max-rows":"3"},model:{value:t.eMemotext,callback:function(e){t.eMemotext=e},expression:"eMemotext"}})],1)],1)],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer",staticStyle:{"overflow-x":"auto"},attrs:{fluid:"",id:"eTable"}},[s("div",{attrs:{id:"resp-table"}},[s("div",{attrs:{id:"resp-table-header"}},[s("div",{staticClass:"table-header-cell"}),t._v(" "),s("div",{staticClass:"table-header-cell",attrs:{id:"itemType"}},[t._v("Item Type")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Item")]),t._v(" "),s("div",{staticClass:"table-header-cell"}),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Description")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Unit")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Quantity")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Price")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Discount(%)")]),t._v(" "),s("div",{staticClass:"table-header-cell"},[t._v("Total")])]),t._v(" "),s("div",{attrs:{id:"resp-table-body"}},t._l(t.rows,function(e,a){return s("div",{key:a,staticClass:"resp-table-row",attrs:{"track-by":"i"}},[s("div",{staticClass:"table-body-cell delete"},[s("b-icon-trash",{staticClass:"customtrashIcon",on:{click:function(e){return t.deleteRow(a)}}})],1),t._v(" "),s("div",{staticClass:"table-body-cell itemType"},[s("b-form-select",{staticClass:"rowInput table_itemTypeSelect",attrs:{options:t.typeList,required:""},on:{change:function(e){return t.getselectedValue(a)}},model:{value:e.itemTypedPicked,callback:function(s){t.$set(e,"itemTypedPicked",s)},expression:"row.itemTypedPicked"}}),t._v(" "),e.itemTypedPickedBool?s("div",{staticClass:"dateError"},[t._v("Please, Select item type!!!")]):t._e()],1),t._v(" "),s("div",{staticClass:"table-body-cell item"},[s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",type:"text",required:"","aria-required":"false"},on:{input:function(e){return t.itemChangeInput(a)}},model:{value:e.itemSelected,callback:function(s){t.$set(e,"itemSelected",s)},expression:"row.itemSelected"}}),t._v(" "),e.searchBool?s("div",{staticClass:"dateError"},[t._v("Please, Enter some value!!!")]):t._e(),t._v(" "),e.itemListBool?[s("div",{staticClass:"dropdown-content"},t._l(t.itemFilteredList(e.itemList,a),function(e,i){return s("div",{key:i+"af",staticClass:"dropdown-item",on:{mousedown:function(s){return t.itemSelectOption(e,a)}}},[t._v(t._s(e.text||e.id||"-"))])}),0)]:t._e()],2),t._v(" "),s("div",{staticClass:"table-body-cell search"},[s("b-button",{staticClass:"searchButton",on:{click:function(e){return t.toggleSearch(a)}}},[s("b-icon",{staticClass:"serachIconCustom",attrs:{icon:"search"}})],1)],1),t._v(" "),s("div",{staticClass:"table-body-cell description"},[s("b-form-textarea",{staticClass:"descriptionClass",attrs:{"max-rows":"3"},model:{value:e.description,callback:function(s){t.$set(e,"description",s)},expression:"row.description"}})],1),t._v(" "),s("div",{staticClass:"table-body-cell unit"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"row.unit"}],staticClass:"rowInput",attrs:{disabled:e.disabledUnit},domProps:{value:e.unit},on:{input:function(s){s.target.composing||t.$set(e,"unit",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"table-body-cell quantity"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"row.quantity"}],staticClass:"rowInput",attrs:{type:"number",number:""},domProps:{value:e.quantity},on:{change:function(e){return t.calculateTotal(a)},input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"table-body-cell price"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"row.price"}],staticClass:"rowInput",attrs:{type:"number",step:"0.01"},domProps:{value:e.price},on:{change:function(e){return t.calculateTotal(a)},input:function(s){s.target.composing||t.$set(e,"price",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"table-body-cell discount"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.discount,expression:"row.discount"}],staticClass:"rowInput",attrs:{type:"number",number:""},domProps:{value:e.discount},on:{change:function(e){return t.calculateTotal(a)},input:function(s){s.target.composing||t.$set(e,"discount",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"table-body-cell total"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.total,expression:"row.total"}],staticClass:"rowInput",attrs:{type:"number",disabled:"",number:""},domProps:{value:e.total},on:{input:function(s){s.target.composing||t.$set(e,"total",s.target.value)}}})])])}),0)]),t._v(" "),s("hr"),t._v(" "),s("modal",{attrs:{name:"dataTable",top:"21",height:"700",width:"700"}},[t.elasticSearch?s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{attrs:{data:t.elasticTableData,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var a=e.row;return[s("button",{staticClass:"editButton",on:{click:function(e){return t.select(a)}}},[t._v("Select")])]}}],null,!1,2899285076)})],1):t._e()],1),t._v(" "),s("b-row",{staticClass:"my-1 tableBottomContainer"},[s("b-col",{attrs:{sm:"6"}},[s("b-button",{staticClass:"addRowBtn",on:{click:t.addRow}},[s("b-icon-plus",{staticClass:"customPlusIcon"}),t._v(" "),s("span",{staticClass:"addBtnTxt"},[t._v("Add")])],1)],1),t._v(" "),s("b-col",{attrs:{sm:"6"}},[s("label",{staticClass:"label customTotal"},[s("span",{staticClass:"allTotalTxt"},[t._v("Sub total:")]),t._v(" "),s("span",{staticClass:"alltotal"},[t._v(t._s(t.overSubAllTotal))])]),t._v(" "),s("label",{staticClass:"label customTotal discountTotal"},[s("span",{staticClass:"allTotalTxt"},[t._v("Discount:")]),t._v(" "),s("span",{staticClass:"alltotal"},[t._v(t._s(t.overAllDiscount))])]),t._v(" "),s("label",{staticClass:"label customTotal"},[s("span",{staticClass:"allTotalTxt"},[t._v("Total:")]),t._v(" "),s("span",{staticClass:"alltotal"},[t._v(t._s(t.overAllTotal))])])])],1),t._v(" "),s("b-row",{staticClass:"my-1 tableBottomContainer",attrs:{id:"save"}},[s("b-button",{ref:"formSubmitBtnEStimates",staticClass:"saveFormBtn",attrs:{type:"submit"},on:{click:t.save}},[s("b-icon-plus",{staticClass:"customPlusIcon_save"}),t._v(" "),s("span",{staticClass:"addBtnTxt_save"},[t._v("Save")])],1),t._v(" "),s("b-button",{staticClass:"saveFormBtn resetFormBtn",attrs:{id:"test"},on:{click:t.reset}},[s("span",{staticClass:"addBtnTxt_save resetBtnTxt_reset"},[t._v("Reset")])])],1)],1)],1),t._v(" "),s("v-tour",{attrs:{name:"myTour2",steps:t.steps,options:{highlight:!0}}})],1)},staticRenderFns:[]};var j={name:"my-tour",components:{AddEstimate:s("VU/8")(F,O,!1,function(t){s("Hwzw")},"data-v-2bfc3a54",null).exports,Sidebar:_,Header:C},created:function(){u.a.defaults.baseURL="http://"+localStorage.activeCompany+".widgetor.com/quotation",this.$store.dispatch("selectPageAction",3)},mounted:function(){var t=this,e={refresh:localStorage.refreshToken};this.$store.state.user.token=localStorage.accessToken,u.a.get("quotes/quotations/",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.tableData=e.data}).catch(function(s){u.a.post("/users/token_refresh/",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$store.state.user.token=localStorage.accessToken,localStorage.accessToken=e.data.access,localStorage.loginToken=e.data.access,t.$router.go(0)}).catch(function(e){console.log(e),t.$router.push("/")})})},data:function(){return{steps:[{target:"#estimateButton",header:{title:"Get Started"},content:"Use this button to add an estimate!"},{target:"#clientTable",content:"Use the Buttons to Edit, View and Update specific Estimates",params:{placement:"left"}},{target:"#estimateButton2",content:"You can also use this button to add an estimate!"}],tour:!1,statusBool:!1,viewHtmlBool:!0,doc_htmlView:"",doc_pdfView:"",putrequest:!1,addBtnBool:!1,rowData:"",statusStrings:{P:"Prepared",S:"Sent",A:"Approved"},statusOptions:[{value:"P",text:"Prepared"},{value:"S",text:"Sent"},{value:"A",text:"Approved"}],statusOptionSelected:"",quotationId:"",columns:["quotation_id","generated_date","customer_str","sales_Man","prepared_by","status","amount","actions"],tableData:[],options:{headings:{quotation_id:"Estimate ID",generated_date:"Date",customer_str:"Customer",sales_Man:"Sales Man",prepared_by:"Prepared by",status:"Status",amount:"Amount"},sortable:["quotation_id","generated_date","customer_str","sale_person_str.sales_person_name"],filterable:["quotation_id","generated_date","customer_str","sale_person_str.sales_person_name"]}}},methods:{startTour:function(){this.$tours.myTour.start(),this.tour=!0},confirmStatus:function(){var t=this;u.a.put("quotes/updatestatus/"+this.quotationId+"/",{status:this.statusOptionSelected},{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.$router.go()}).catch(function(t){console.log(t)})},cancelStatus:function(){this.statusOptionSelected="",this.$modal.hide("statusPopup")},statusBox:function(t){this.$modal.show("statusPopup"),this.quotationId=t.id,this.statusOptionSelected=t.status},userValidate:function(t){return this.$store.state.user.username=localStorage.username,this.$store.state.user.isAdmin=localStorage.isAdmin,"true"===this.$store.state.user.isAdmin||this.$store.getters.username===t.prepared_by},statusStr:function(t){return this.statusStrings[t.status]},scrollToEnd:function(){},reset:function(t){this.addBtnBool=t,this.rowData="",this.putrequest=!1},viewHtml:function(t){var e=t.id;this.getCotationTemplateLinks(e),this.viewHtmlBool=!1},viewpdf:function(){window.open(this.doc_pdfView)},printPdf:function(){var t=document.querySelector("iframe");console.log("Sending"),t.contentWindow.postMessage("Print","http://"+this.$store.state.user.activeCompany+".widgetor.com")},closeHtmlView:function(){this.viewHtmlBool=!0,this.doc_htmlView=""},getCotationTemplateLinks:function(t){var e=this;u.a.post("quotes/createquotation/"+t+"/",{},{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){e.doc_htmlView=t.data.doc_html,e.doc_pdfView=t.data.doc_pdf}).catch(function(t){console.log(t)})},showEstimateControls:function(){this.addBtnBool=!0},edit:function(t){this.putrequest=!0,this.isdisplay="block",this.rowData=t,this.addBtnBool=!0}}},Q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"addEstimateContainer mainContentContainer"},[s("b-button",{on:{click:t.startTour}},[t._v("Start Tour")]),t._v(" "),t.viewHtmlBool?s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"EstimationListTitleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Estimate List")])])],1):t._e(),t._v(" "),t.viewHtmlBool?s("b-container",{staticClass:"card margBot",attrs:{id:"EstimationList",fluid:""}},[t.userValidate("row")?s("a",{attrs:{href:"#AddEstimateCont"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addButton_1"},on:{click:t.showEstimateControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon",attrs:{id:"estimateButton"}}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Estimate")])],1)]):t._e(),t._v(" "),s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{staticClass:"dashBoardTable",attrs:{id:"clientTable",data:t.tableData,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"sales_Man",fn:function(e){var s=e.row;return[t._v(t._s(s.sale_person_str.sales_person_name))]}},{key:"status",fn:function(e){var s=e.row;return[t._v(t._s(t.statusStr(s)))]}},{key:"actions",fn:function(e){var a=e.row;return[s("a",{attrs:{href:"#AddEstimateCont"}},[t.userValidate(a)?s("button",{staticClass:"editButton",on:{click:function(e){return t.edit(a)}}},[t._v("Edit")]):t._e()]),t._v(" "),s("button",{staticClass:"editButton",on:{click:function(e){return t.viewHtml(a)}}},[t._v("View")]),t._v(" "),s("button",{staticClass:"editButton",on:{click:function(e){return t.statusBox(a)}}},[t._v("Update")])]}}],null,!1,2350111771)})],1),t._v(" "),s("modal",{attrs:{name:"statusPopup",width:"222px",height:"160px"}},[s("div",{staticClass:"status"},[s("b-form-select",{staticClass:"statusSelect",attrs:{options:t.statusOptions},model:{value:t.statusOptionSelected,callback:function(e){t.statusOptionSelected=e},expression:"statusOptionSelected"}}),t._v(" "),s("b-button",{staticClass:"statusRowBtn",attrs:{id:"confirmStatusBtn"},on:{click:t.confirmStatus}},[t._v("Confirm")]),t._v(" "),s("b-button",{staticClass:"statusRowBtn cancelStatusBtn",on:{click:t.cancelStatus}},[t._v("Cancel")])],1)]),t._v(" "),t.userValidate("row")?s("a",{attrs:{href:"#AddEstimateCont"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addButton_2"},on:{click:t.showEstimateControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon",attrs:{id:"estimateButton2"}}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Estimate")])],1)]):t._e()],1):t._e(),t._v(" "),s("div",{attrs:{id:"AddEstimateCont"}},[t.viewHtmlBool&&t.addBtnBool?s("AddEstimate",{attrs:{tableData:t.tableData,editRowData:t.rowData,tour:t.tour,toggleRequest:t.putrequest,visible:t.addBtnBool},on:{resetEdit:function(e){t.rowData=e},resetEvent:function(e){return t.reset(e)},resetVisible:function(e){t.addBtnBool=e}}}):t._e()],1),t._v(" "),t.viewHtmlBool?t._e():s("b-container",{staticClass:"card estimateContainer htmlViewContainer",attrs:{fluid:"",id:"ename_enum_container"}},[s("b-row",{staticClass:"my-1 btnRow"},[s("b-button",{staticClass:"pdfFormBtn",on:{click:t.viewpdf}},[s("b-icon",{staticClass:"customDocIcon_pdf",attrs:{icon:"document-richtext"}}),t._v(" "),s("span",{staticClass:"viewBtnTxt_pdf"},[t._v("Open as a Pdf")])],1),t._v(" "),s("b-button",{staticClass:"pdfFormBtn",attrs:{id:"printPdf"},on:{click:t.printPdf}},[s("b-icon",{staticClass:"customDocIcon_pdf",attrs:{icon:"document-richtext"}}),t._v(" "),s("span",{staticClass:"viewBtnTxt_pdf"},[t._v("Print as a Pdf")])],1),t._v(" "),s("b-icon",{staticClass:"customXIcon",attrs:{icon:"x-square"},on:{click:t.closeHtmlView}})],1),t._v(" "),s("iframe",{staticClass:"htmlView",attrs:{id:"printHtmlView",name:"printHtmlView",src:t.doc_htmlView}},[s("p",[t._v("Your browser does not support iframes.")])])],1)],1),t._v(" "),s("Sidebar"),t._v(" "),s("v-tour",{attrs:{name:"myTour",steps:t.steps,options:{highlight:!0}}})],1)},staticRenderFns:[]};var Y=s("VU/8")(j,Q,!1,function(t){s("dhsO")},"data-v-9596f884",null).exports,G={props:["visible"],data:function(){return{isdisplay:"none",checked:!1,selected:null,CustomerTypeList:[],selected2:null,CustomerCategoryList:[],selected3:null,DesignationList:[],selected4:null,CustomerList:[],isSucess:!1,test:[],contactsList:[],emailIndex:0,phoneIndex:0,form:{customer_name:"",credit_allowed:!1,customer_type:"",customer_category:"",credit_days:"",contacts:[{contact_name:"",designation:"",emails:[{email:"",is_primary:!0}],phones:[{phone:"",is_primary:!0}]}]},show:!0}},created:function(){var t=this;null!=this.$store.state.masterData[2].customer_types&&this.$store.state.masterData[2].customer_types.length>0&&this.$store.state.masterData[2].customer_types.forEach(function(e){t.CustomerTypeList.push({value:e.id,text:e.customer_type})}),null!=this.$store.state.masterData[1].customer_categories&&this.$store.state.masterData[1].customer_categories.length>0&&this.$store.state.masterData[1].customer_categories.forEach(function(e){t.CustomerCategoryList.push({value:e.id,text:e.customer_category})}),null!=this.$store.state.masterData[3].designations&&this.$store.state.masterData[3].designations.length>0&&this.$store.state.masterData[3].designations.forEach(function(e){t.DesignationList.push({value:e.id,text:e.designation})})},beforeDestroy:function(){console.log("this.isdisplay removed"),this.isdisplay="none"},mounted:function(){var t=this;window.addEventListener("keydown",function(e){(console.log(t.isdisplay,"this.isdisplay"),"Enter"===e.key&&t.visible&&"block"===t.isdisplay)&&t.$refs.formSubmitBtnCustomers.click()}),this.$store.state.user.token=localStorage.accessToken,u.a.get("/customers/customers",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){e.data.forEach(function(e){return t.CustomerList.push({value:e.id,text:e.customer_name})})})},watch:{isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){return e.isSucess=!1},1500),this.$router.go(0))}},methods:{showContact:function(){var t=this;this.isdisplay="block",setTimeout(function(){return t.$router.push("customers")},1e3)},addEmail:function(){""==!this.form.contacts[0].emails[this.emailIndex].email?(this.form.contacts[0].emails.push({email:"",is_primary:!1}),this.emailIndex++):alert("Fill in missing email details before adding")},addPhone:function(){""==!this.form.contacts[0].phones[this.phoneIndex].phone?(this.form.contacts[0].phones.push({phone:"",is_primary:!1}),this.phoneIndex++):alert("Fill in missing phone details before adding")},delEmail:function(t){this.form.contacts[0].emails.splice(t,1),this.emailIndex--},delPhone:function(t){this.form.contacts[0].phones.splice(t,1),this.phoneIndex--},onSubmit:function(t){var e=this;t.preventDefault();var s={customer_name:this.form.customer_name,credit_allowed:this.form.credit_allowed,customer_type:Number(this.form.customer_type),customer_category:Number(this.form.customer_category),credit_days:Number(this.form.credit_days),contacts:[this.contactsList[0]]};u.a.post("/customers/customers/",s,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){e.isSucess=!0,alert("Customer successfully added!")}).catch(function(t){return alert(t)})},onReset:function(t){var e=this;this.$emit("displayNone","none"),t.preventDefault(),this.form.customer_name="",this.form.credit_allowed="",this.form.customer_type="",this.form.customer_category="",this.form.credit_days="",this.contactsList=[],this.form.contacts=[{contact_name:"",designation:"",emails:[{email:"",is_primary:!0}],phones:[{phone:"",is_primary:!0}]}],this.$nextTick(function(){e.show=!0})},addContact:function(){if(""==!this.form.contacts[0].emails[this.emailIndex].email&&""==!this.form.contacts[0].phones[this.phoneIndex].phone&&""==!this.form.contacts[0].contact_name&&""==!this.form.contacts[0].designation){var t=this.form.contacts[0].contact_name,e=this.form.contacts[0].designation,s=this.form.contacts[0].customer,a=this.form.contacts[0].emails.map(function(t){return{email:t.email,is_primary:t.is_primary}}),i=this.form.contacts[0].phones.map(function(t){return{phone:t.phone,is_primary:t.is_primary}});this.contactsList.push({contact_name:t,designation:e,customer:s,emails:a,phones:i}),this.form.contacts=[{contact_name:"",designation:"",emails:[{email:"",is_primary:!1}],phones:[{phone:"",is_primary:!1}]}]}else alert("fill in missing contact details")},emailChk:function(t){for(var e in this.form.contacts[0].emails)this.form.contacts[0].emails[e].is_primary=!1;this.form.contacts[0].emails[t].is_primary=!0},phoneChk:function(t){for(var e in this.form.contacts[0].phones)this.form.contacts[0].phones[e].is_primary=!1;this.form.contacts[0].phones[t].is_primary=!0}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add Customer")])])],1),t._v(" "),t.show?s("b-form",{attrs:{inline:""},on:{submit:t.onSubmit,reset:t.onReset}},[s("b-container",{staticClass:"card estimateContainer eDetailsContainer",attrs:{fluid:"",id:"eDetails"}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"4"}},[s("b-form-group",[s("label",{staticClass:"label"},[t._v("\n              Name:\n              "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput w-100",attrs:{size:"md",id:"c_name",type:"text",required:"",placeholder:"Name"},model:{value:t.form.customer_name,callback:function(e){t.$set(t.form,"customer_name",e)},expression:"form.customer_name"}})],1)],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n              Customer Type\n              "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.CustomerTypeList,required:""},model:{value:t.form.customer_type,callback:function(e){t.$set(t.form,"customer_type",e)},expression:"form.customer_type"}}),t._v(" "),s("div",{staticClass:"mt-3"},[s("strong",[t._v(t._s(t.selected))])])],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n              Customer Category\n              "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.CustomerCategoryList,required:""},model:{value:t.form.customer_category,callback:function(e){t.$set(t.form,"customer_category",e)},expression:"form.customer_category"}}),t._v(" "),s("div",{staticClass:"mt-3"},[s("strong",[t._v(t._s(t.selected2))])])],1)],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Credit Allowed:")]),t._v(" "),s("div",[s("b-form-checkbox",{staticClass:"toggleSwitch",attrs:{name:"check-button",switch:"",size:"lg"},model:{value:t.form.credit_allowed,callback:function(e){t.$set(t.form,"credit_allowed",e)},expression:"form.credit_allowed"}})],1)]),t._v(" "),t.form.credit_allowed?s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Credit Days:")]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"contact_name",type:"text",placeholder:"Contact.."},model:{value:t.form.credit_days,callback:function(e){t.$set(t.form,"credit_days",e)},expression:"form.credit_days"}})],1):t._e()],1),t._v(" "),s("b-button",{staticClass:"yellow btn addContactButton",on:{click:t.showContact}},[t._v("Add Contacts"),s("a",{attrs:{href:"#eDetails"}})])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer",style:{display:t.isdisplay},attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("List Of Contacts: ")])]),t._v(" "),t._l(t.contactsList,function(e,a){return s("b-row",{key:a,staticClass:"my-1"},[s("h3",{staticStyle:{"margin-left":"20px","margin-top":"2px"}},[t._v(t._s(t.contactsList[a].contact_name)+" ")])])})],2),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",style:{display:t.isdisplay},attrs:{fluid:"",id:"eDetails"}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Name:\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"c_contact_name",type:"text",placeholder:"Enter Name"},model:{value:t.form.contacts[0].contact_name,callback:function(e){t.$set(t.form.contacts[0],"contact_name",e)},expression:"form.contacts[0].contact_name"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Designation:\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.DesignationList,id:"c_designation"},model:{value:t.form.contacts[0].designation,callback:function(e){t.$set(t.form.contacts[0],"designation",e)},expression:"form.contacts[0].designation"}}),t._v(" "),s("div",{staticClass:"mt-3"})],1)],1),t._v(" "),s("b-row",{staticClass:"w-50",attrs:{sm:"6"}},t._l(t.form.contacts[0].emails,function(e,a){return s("b-row",{key:a},[s("b-col",[s("label",{staticClass:"label"},[t._v("\n                Email\n                "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"c_email",type:"text",placeholder:"Enter Email"},model:{value:e.email,callback:function(s){t.$set(e,"email",s)},expression:"emailEle.email"}})],1),t._v(" "),s("b-col",[s("label",{staticClass:"label"},[t._v("Is Primary?")]),t._v(" "),s("b-form-checkbox",{attrs:{name:"check-button",size:"lg"},on:{change:function(e){return t.emailChk(a)}},model:{value:e.is_primary,callback:function(s){t.$set(e,"is_primary",s)},expression:"emailEle.is_primary"}})],1),t._v(" "),s("b-col",{attrs:{sm:"1"}},[s("b-button",{attrs:{variant:"success"},on:{click:t.addEmail}},[t._v("Add")])],1),t._v(" "),s("b-col",[s("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.delEmail(a)}}},[t._v("Delete")])],1)],1)}),1),t._v(" "),s("b-row",{staticClass:"w-50",attrs:{sm:"6"}},t._l(t.form.contacts[0].phones,function(e,a){return s("b-row",{key:a},[s("b-col",[s("label",{staticClass:"label"},[t._v("\n                Phone\n                "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"phone",type:"text",placeholder:"Enter Phone Number"},model:{value:e.phone,callback:function(s){t.$set(e,"phone",s)},expression:"phoneEle.phone"}})],1),t._v(" "),s("b-col",[s("label",{staticClass:"label"},[t._v("Is Primary?")]),t._v(" "),s("b-form-checkbox",{attrs:{name:"check-button",size:"lg"},on:{change:function(e){return t.phoneChk(a)}},model:{value:e.is_primary,callback:function(s){t.$set(e,"is_primary",s)},expression:"phoneEle.is_primary"}})],1),t._v(" "),s("b-col",{attrs:{sm:"1"}},[s("b-button",{attrs:{variant:"success"},on:{click:t.addPhone}},[t._v("Add")])],1),t._v(" "),s("b-col",[s("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.delPhone(a)}}},[t._v("Delete")])],1)],1)}),1),t._v(" "),s("b-button",{staticClass:"yellow addEdetails",on:{click:t.addContact}},[t._v("Add")]),t._v(" "),s("b-row",{staticClass:"w-100 "},[s("b-button",{ref:"formSubmitBtnCustomers",staticClass:"yellow submitBtn",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("b-button",{staticClass:"submitBtn resetBtn",attrs:{type:"reset"},on:{click:t.onReset}},[t._v("Reset")])],1)],1)],1):t._e()],1)},staticRenderFns:[]};var J=s("VU/8")(G,W,!1,function(t){s("RK/m")},"data-v-d72cb358",null).exports,Z={data:function(){return{selected1:null,DesignationList:this.getDesignationList(),selected2:null,CustomerList:this.getCustomerList(),contact:[{email:"",phone:"",is_primary:!1}]}},methods:{getDesignationList:function(){var t=[];return this.$store.state.masterData[3].designations.forEach(function(e){t.push({value:e.id,text:e.designation})}),t},getCustomerList:function(){var t=[];return u.a.get("http://35.225.127.81/quotation/customers/customers/?user=1").then(function(e){e.data.forEach(function(e){return t.push({value:e.id,text:e.customer_name})})}),t},addContactMore:function(){this.contact.push({email:"",phone:"",is_primary:!1})},delContactMore:function(t){this.contact.splice(t,1)}}},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Customers"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add Contact")])])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"eDetails"}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Name:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"ename",type:"text",placeholder:"name"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Designation:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.DesignationList},model:{value:t.selected1,callback:function(e){t.selected1=e},expression:"selected1"}}),t._v(" "),s("div",{staticClass:"mt-3"},[t._v("\n          Selected:\n          "),s("strong",[t._v(t._s(t.selected1))])])],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Customer(DropDown)\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.CustomerList},model:{value:t.selected2,callback:function(e){t.selected2=e},expression:"selected2"}}),t._v(" "),s("div",{staticClass:"mt-3"},[t._v("\n          Selected:\n          "),s("strong",[t._v(t._s(t.selected2))])])],1)],1),t._v(" "),t._l(t.contact,function(e,a){return s("b-row",{key:a,staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Email(primary)\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"enumber",type:"text",placeholder:"P.O./S.O.."},model:{value:e.email,callback:function(s){t.$set(e,"email",s)},expression:"contactEle.email"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Phone(primary)\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",id:"ename",type:"text",placeholder:"Contact.."},model:{value:e.phone,callback:function(s){t.$set(e,"phone",s)},expression:"contactEle.phone"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.is_primary,expression:"contactEle.is_primary"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.is_primary)?t._i(e.is_primary,null)>-1:e.is_primary},on:{change:function(s){var a=e.is_primary,i=s.target,o=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&t.$set(e,"is_primary",a.concat([null])):n>-1&&t.$set(e,"is_primary",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e,"is_primary",o)}}}),t._v(" "),s("input",{staticClass:"btn btn-default btn-warning buttonDefSize btn-raised",attrs:{type:"button",id:"btnAdd",value:"add"},on:{click:function(e){return t.delContactMore(a)}}})])],1)}),t._v(" "),s("b-row",{staticClass:"my-1"},[s("input",{staticClass:"btn btn-default btn-warning buttonDefSize btn-raised",attrs:{type:"button",id:"btnsubmit",value:"Save"}}),t._v(" "),s("input",{staticClass:"btn btn-default btn-warning buttonDefSize btn-raised",attrs:{type:"button",id:"btnAdd",value:"add"},on:{click:t.addContactMore}})])],2)],1)},staticRenderFns:[]};var X={created:function(){u.a.defaults.baseURL="http://"+localStorage.activeCompany+".widgetor.com/quotation",this.$store.dispatch("selectPageAction",2)},data:function(){return{isdisplay:"none",addCustomersVisible:!1,columns:["id","customer_name","customer_type_str","customer_category_str","credit_days"],tableData:[],options:{headings:{id:"ID",customer_name:"Customer Name",customer_type_str:"Customer Type",customer_category_str:"Customer Category",credit_allowed:"Credit Allowed",credit_days:"Credit Days"},sortable:["id","customer_name","customer_type_str","customer_category_str","credit_allowed","credit_days"],filterable:["id","customer_name","customer_type_str","customer_category_str","credit_allowed","credit_days"]}}},mounted:function(){var t=this,e={refresh:localStorage.refreshToken};this.$store.state.user.token=localStorage.accessToken,u.a.get("/customers/customers",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.tableData=e.data}).catch(function(s){u.a.post("/users/token_refresh/",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$store.state.user.token=localStorage.accessToken,localStorage.accessToken=e.data.access,localStorage.loginToken=e.data.access,t.$router.go(0)}).catch(function(e){console.log(e),t.$router.push("/")})})},components:{editContact:s("VU/8")(Z,K,!1,function(t){s("IWvO")},null,null).exports,editCustomers:J,Header:C,Sidebar:_},methods:{userValidate:function(t){return this.$store.state.user.username=localStorage.username,this.$store.state.user.isAdmin=localStorage.isAdmin,"true"===this.$store.state.user.isAdmin||this.$store.getters.username===t.prepared_by},showCustomerControls:function(){this.isdisplay="block",this.addCustomersVisible=!0}}},tt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"Customers mainContentContainer"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"customerTitleContainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Customers")])])],1),t._v(" "),s("b-container",{staticClass:"card CustomerList estimateContainer2 margBot",attrs:{fluid:""}},[t.userValidate("row")?s("a",{attrs:{href:"#AddCustomers"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addCustomer_1"},on:{click:t.showCustomerControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Customer")])],1)]):t._e(),t._v(" "),s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{attrs:{data:t.tableData,columns:t.columns,options:t.options}})],1),t._v(" "),t.userValidate("row")?s("a",{attrs:{href:"#AddCustomers"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addCustomer_2"},on:{click:t.showCustomerControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Customer")])],1)]):t._e()],1),t._v(" "),s("div",{staticClass:"editCustContainer",style:{display:t.isdisplay}},[s("editCustomers",{attrs:{id:"AddCustomers",visible:t.addCustomersVisible},on:{displayNone:function(e){t.isdisplay=e}}})],1)],1),t._v(" "),s("Sidebar")],1)},staticRenderFns:[]};var et=s("VU/8")(X,tt,!1,function(t){s("plMp")},"data-v-58a955e8",null).exports,st={props:["editRowData","toggleRequest","elasticSearch","visible"],data:function(){return{response:!1,toggleData:!0,sellchecked:!1,costchecked:!1,selected:null,ProductCategoryList:[],selected2:null,UnitList:[],form:{item_code:this.editRowData.item_code,description:this.editRowData.description,allow_buy:this.editRowData.allow_buy,allow_sell:this.editRowData.allow_sell,selling_price:this.editRowData.selling_price,cost_price:this.editRowData.cost_price,category:this.editRowData.category,unit:this.editRowData.unit},show:!0,isSucess:!1}},created:function(){var t=this;this.$store.state.user.token=localStorage.accessToken,null!=this.$store.state.masterData[5].product_categories&&this.$store.state.masterData[5].product_categories.length>0&&this.$store.state.masterData[5].product_categories.forEach(function(e){t.ProductCategoryList.push({value:e.id,text:e.product_category})}),null!=this.$store.state.masterData[6].units&&this.$store.state.masterData[6].units.length>0&&this.$store.state.masterData[6].units.forEach(function(e){t.UnitList.push({value:e.id,text:e.unit})})},mounted:function(){var t=this;window.addEventListener("keydown",function(e){"Enter"===e.key&&t.visible&&t.$refs.formSubmitBtn.click()})},watch:{isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){return e.isSucess=!1},1500),this.$router.go(0))},editRowData:function(t){this.form.item_code=t.item_code,this.form.description=t.description,this.form.allow_buy=t.allow_buy,this.form.allow_sell=t.allow_sell,this.form.selling_price=t.selling_price,this.form.cost_price=t.cost_price,1==this.elasticSearch?(this.form.category=t.category._id,this.form.unit=t.unit._id):(this.form.category=t.category,this.form.unit=t.unit)},toggleRequest:function(t){this.toggleData=t}},methods:{onSubmit:function(t){var e=this;t.preventDefault();var s={item_code:this.form.item_code,description:this.form.description,category:this.form.category,unit:this.form.unit,selling_price:Number(this.form.selling_price),cost_price:Number(this.form.cost_price),allow_buy:this.form.allow_buy,allow_sell:this.form.allow_sell};1==this.toggleRequest?u.a.get("/products/products/?search="+s.item_code,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){1==t.data.length?(e.response=!0,u.a.put("/products/products/"+t.data[0].id+"/",s,{headers:{Authorization:"Bearer "+e.$store.state.user.token}}).then(function(t){alert("Product successfuly edited"),e.isSucess=!0,e.show=!1}).catch(function(t){return console.log(t)})):(e.response=!1,u.a.post("/products/products/",s,{headers:{Authorization:"Bearer "+e.$store.state.user.token}}).then(function(t){alert("Product successfully added"),e.isSucess=!0,e.show=!1}).catch(function(t){return console.log(t)}))}):u.a.put("/products/products/"+this.editRowData.id+"/",s,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){alert("Product successfuly edited"),e.isSucess=!0,e.show=!1}).catch(function(t){return console.log(t)})},onReset:function(t){var e=this;this.$emit("displayNone","none"),this.form.item_code="",this.form.description="",this.form.allow_buy=!1,this.form.allow_sell=!1,this.form.category="",this.form.unit="",this.selling_price="",this.cost_price="",this.show=!1,this.$nextTick(function(){e.show=!0})}}},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[1==this.toggleData?s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add Product")]):s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Edit Product")])])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"eDetails"}},[t.show?s("b-form",{attrs:{inline:""},on:{submit:t.onSubmit,reset:t.onReset}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Item Code:\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",type:"text",required:"",placeholder:"Item Code"},model:{value:t.form.item_code,callback:function(e){t.$set(t.form,"item_code",e)},expression:"form.item_code"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Description:\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",type:"text",required:"",placeholder:"Description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Product Category\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.ProductCategoryList,required:""},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}}),t._v(" "),s("div",{staticClass:"mt-3"},[s("strong",[t._v(t._s(t.selected))])])],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n            Unit\n            "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.UnitList,required:""},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}}),t._v(" "),s("div",{staticClass:"mt-3"},[s("strong",[t._v(t._s(t.selected2))])])],1)],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Allow Sell:")]),t._v(" "),s("div",[s("b-form-checkbox",{attrs:{name:"check-button",switch:"",size:"lg"},model:{value:t.form.allow_sell,callback:function(e){t.$set(t.form,"allow_sell",e)},expression:"form.allow_sell"}})],1)]),t._v(" "),t.form.allow_sell?s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Selling Price:")]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",type:"text",required:"",placeholder:"Selling Price"},model:{value:t.form.selling_price,callback:function(e){t.$set(t.form,"selling_price",e)},expression:"form.selling_price"}})],1):t._e()],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Allow Buy:")]),t._v(" "),s("div",[s("b-form-checkbox",{attrs:{name:"check-button",switch:"",size:"lg"},model:{value:t.form.allow_buy,callback:function(e){t.$set(t.form,"allow_buy",e)},expression:"form.allow_buy"}})],1)]),t._v(" "),t.form.allow_buy?s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("Cost Price:")]),t._v(" "),s("b-form-input",{staticClass:"rowInput",attrs:{size:"md",type:"text",required:"",placeholder:"Cost Price"},model:{value:t.form.cost_price,callback:function(e){t.$set(t.form,"cost_price",e)},expression:"form.cost_price"}})],1):t._e()],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-button",{ref:"formSubmitBtn",staticClass:"btn yellow saveFormBtn",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("b-button",{staticClass:"btn saveFormBtn resetFormBtn",attrs:{type:"reset"}},[t._v("Reset")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var it={created:function(){u.a.defaults.baseURL="http://"+localStorage.activeCompany+".widgetor.com/quotation",this.$store.dispatch("selectPageAction",1)},data:function(){return{putrequest:!0,isdisplay:"none",addProductsVisible:!1,rowData:"",elasticSearchData:"",elasticSearchToggle:!1,columns:["item_code","description","selling_price","actions"],tableData:[],options:{headings:{item_code:"Item Code",description:"Description",selling_price:"Selling Price"},sortable:["item_code","description","category_str","unit_str"],filterable:["item_code","description","category_str","unit_str"],texts:{filterPlaceholder:"Internal Table Search"}}}},mounted:function(){var t=this,e={refresh:localStorage.refreshToken};this.$store.state.user.token=localStorage.accessToken,u.a.get("/products/products/?pagesize=50",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){e.data.forEach(function(e){t.tableData.push(e)})}).catch(function(s){u.a.post("/users/token_refresh/",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$store.state.user.token=localStorage.accessToken,localStorage.accessToken=e.data.access,localStorage.loginToken=e.data.access,t.$router.go(0)}).catch(function(e){console.log(e),t.$router.push("/")})})},components:{addProducts:s("VU/8")(st,at,!1,function(t){s("uN8E")},"data-v-d71cf556",null).exports,Header:C,Sidebar:_},methods:{userValidate:function(t){return this.$store.state.user.username=localStorage.username,this.$store.state.user.isAdmin=localStorage.isAdmin,"true"===this.$store.state.user.isAdmin||this.$store.getters.username===t.prepared_by},showProductControls:function(){this.isdisplay="block",this.putrequest=!0,this.addProductsVisible=!0},editButton:function(){this.putrequest=!1,this.addProductsVisible=!0},edit:function(t){this.isdisplay="block",this.rowData=t},elasticSearch:function(){var t=this;this.columns=["item_code","description","selling_price","actions"],u.a.get("/products/products/?search="+this.elasticSearchData,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){0===e.data.length?t.$alert("No results found!!!!","Error","error"):(t.tableData.length=0,t.tableData=[],e.data.forEach(function(e){t.tableData.push(e)}))}).catch(function(t){console.log(t)}),this.elasticSearchToggle=!0},onReset:function(){var t=this;this.isdisplay="none",this.elasticSearchToggle=!1,u.a.get("/products/products/?pagesize=50",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.tableData.length=0,t.tableData=[],e.data.forEach(function(e){t.tableData.push(e)})}).catch(function(t){console.log(t)})}}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"Products mainContentContainer"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"productTitleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Products List")])])],1),t._v(" "),s("b-container",{staticClass:"card CustomerList estimateContainer margBot",attrs:{fluid:"",id:"titleConatainer"}},[t.userValidate("row")?s("a",{attrs:{href:"#AddProducts"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addproducts_1"},on:{click:t.showProductControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Product")])],1)]):t._e(),t._v(" "),s("b-row",{staticClass:"elasticSearchBox"},[s("b-col",{attrs:{sm:"3"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.elasticSearchData,expression:"elasticSearchData"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"emailHelp",placeholder:"Elastic Search"},domProps:{value:t.elasticSearchData},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.elasticSearch(e)},input:function(e){e.target.composing||(t.elasticSearchData=e.target.value)}}})]),t._v(" "),s("b-col",{attrs:{sm:"1"}},[s("button",{staticClass:"btn yellow elasticButton",attrs:{type:"button"},on:{click:t.elasticSearch}},[t._v("Search")])]),t._v(" "),s("b-col",{attrs:{sm:"1"}},[s("button",{staticClass:"btn yellow elasticSearchButton",attrs:{type:"button"},on:{click:t.onReset}},[t._v("Reset")])])],1),t._v(" "),s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{attrs:{data:t.tableData,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var a=e.row;return[t.userValidate(a)?s("button",{staticClass:"editButton",on:{click:function(e){t.edit(a),t.editButton()}}},[s("a",{attrs:{href:"#AddProducts"}},[t._v("Edit")])]):t._e()]}}])})],1),t._v(" "),t.userValidate("row")?s("a",{attrs:{href:"#AddProducts"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addproducts_2"},on:{click:t.showProductControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Product")])],1)]):t._e()],1),t._v(" "),s("div",{staticClass:"editCustContainer",style:{display:t.isdisplay},attrs:{id:"AddProducts"}},[s("addProducts",{attrs:{editRowData:t.rowData,toggleRequest:t.putrequest,elasticSearch:t.elasticSearchToggle,visible:t.addProductsVisible},on:{displayNone:function(e){t.isdisplay=e}}})],1)],1),t._v(" "),s("Sidebar")],1)},staticRenderFns:[]};var nt=s("VU/8")(it,ot,!1,function(t){s("BUVG")},"data-v-958dc0ea",null).exports,rt={props:["editRowData","toggleRequest","visible"],beforeDestroy:function(){this.$emit("resetVisible",!1)},mounted:function(){var t=this;window.addEventListener("keydown",function(e){"Enter"===e.key&&t.visible&&t.$refs.formSubmitBtnServices.click()})},data:function(){return{toggleData:!0,sellchecked:!1,selected:null,ServiceCategoryList:[],form:{service_code:"",description:"",allow_sell:!1,selling_price:"",category:""},show:!0,isSucess:!1}},created:function(){var t=this;null!=this.$store.state.masterData[4].service_categories&&this.$store.state.masterData[4].service_categories.length>0&&this.$store.state.masterData[4].service_categories.forEach(function(e){t.ServiceCategoryList.push({value:e.id,text:e.service_category})})},watch:{isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){e.isSucess=!1},1500),this.$router.go(0))},editRowData:function(t){this.form.service_code=t.service_code,this.form.description=t.description,this.form.allow_sell=t.allow_sell,this.form.selling_price=t.selling_price,this.form.category=t.category},toggleRequest:function(t){this.toggleData=t}},methods:{getCategories:function(){var t=[];return null!=this.$store.state.masterData[4].service_categories&&this.$store.state.masterData[4].service_categories.length>0&&this.$store.state.masterData[4].service_categories.forEach(function(e){t.push({value:e.id,text:e.service_category})}),t},onSubmit:function(t){var e=this;t.preventDefault();var s={service_code:this.form.service_code,description:this.form.description,category:this.form.category,unit:this.form.unit,selling_price:Number(this.form.selling_price),allow_sell:this.form.allow_sell};!1===this.toggleRequest?u.a.put("/products/services/"+this.editRowData.id+"/",s,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){alert("Product Successfully Edited"),e.isSucess=!0,e.show=!1}).catch(function(t){return console.log(t)}):u.a.post("/products/services/",s,{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(t){e.isSucess=!0,e.show=!1,alert("Product Successfully Added")}).catch(function(t){return console.log(t)})},onReset:function(t){var e=this;t.preventDefault(),this.$emit("displayNone","none"),this.form.service_code="",this.form.description="",this.form.allow_sell=!1,this.form.category="",this.selling_price="",this.show=!1,this.$nextTick(function(){e.show=!0})}}},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[1==this.toggleData?s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add Service")]):s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Edit Service")])])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"eDetails"}},[t.show?s("b-form",{attrs:{inline:""},on:{submit:t.onSubmit,reset:t.onReset}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Service Code:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:"Service Code"},model:{value:t.form.service_code,callback:function(e){t.$set(t.form,"service_code",e)},expression:"form.service_code"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Description:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:"Description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Service Category\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-select",{staticClass:"rowInput",attrs:{options:t.ServiceCategoryList,required:""},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}}),t._v(" "),s("div",{staticClass:"mt-3"},[s("strong",[t._v(t._s(t.selected))])])],1)],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label "},[t._v("Allow Sell:")]),t._v(" "),s("div",[s("b-form-checkbox",{attrs:{name:"check-button",switch:"",size:"lg"},model:{value:t.form.allow_sell,callback:function(e){t.$set(t.form,"allow_sell",e)},expression:"form.allow_sell"}})],1)]),t._v(" "),t.form.allow_sell?s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Selling Price:\n        ")]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:"Selling Price"},model:{value:t.form.selling_price,callback:function(e){t.$set(t.form,"selling_price",e)},expression:"form.selling_price"}})],1):t._e()],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-button",{ref:"formSubmitBtnServices",staticClass:"yellow submitBtn",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("b-button",{staticClass:"yellow submitBtn resetBtn",attrs:{type:"reset"}},[t._v("Reset")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var lt={created:function(){u.a.defaults.baseURL="http://"+localStorage.activeCompany+".widgetor.com/quotation",this.$store.dispatch("selectPageAction",4)},data:function(){return{isdisplay:"none",putrequest:!0,addServicesVisible:!1,rowData:"",columns:["service_code","description","category_str","actions"],tableData:[],options:{headings:{service_code:"Service Code",description:"Description",category_str:"Category"},sortable:["service_code","description","category_str"],filterable:["service_code","description","category_str"]}}},mounted:function(){var t=this,e={refresh:localStorage.refreshToken};this.$store.state.user.token=localStorage.accessToken,u.a.get("/products/services/",{headers:{Authorization:"Bearer "+this.$store.state.user.token}}).then(function(e){t.tableData=e.data}).catch(function(s){u.a.post("/users/token_refresh/",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$store.state.user.token=localStorage.accessToken,localStorage.accessToken=e.data.access,localStorage.loginToken=e.data.access,t.$router.go(0)}).catch(function(e){console.log(e),t.$router.push("/")})})},components:{addServices:s("VU/8")(rt,ct,!1,function(t){s("fLN4")},"data-v-b3d6589e",null).exports,Header:C,Sidebar:_},methods:{userValidate:function(t){return this.$store.state.user.username=localStorage.username,this.$store.state.user.isAdmin=localStorage.isAdmin,"true"===this.$store.state.user.isAdmin||this.$store.getters.username===t.prepared_by},showServiceControls:function(){this.isdisplay="block",this.putrequest=!0,this.addServicesVisible=!0},edit:function(t){this.isdisplay="block",this.rowData=t,this.addServicesVisible=!0},editButton:function(){this.putrequest=!1}}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"Services mainContentContainer"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"servicetitleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Services List")])])],1),t._v(" "),s("b-container",{staticClass:"card CustomerList estimateContainer margBot",attrs:{fluid:"",id:"titleConatainer"}},[t.userValidate("row")?s("a",{attrs:{href:"#AddServices"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addServices_1"},on:{click:t.showServiceControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Service")])],1)]):t._e(),t._v(" "),s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{attrs:{data:t.tableData,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var a=e.row;return[t.userValidate(a)?s("button",{staticClass:"editButton",on:{click:function(e){t.edit(a),t.editButton()}}},[s("a",{attrs:{href:"#AddServices"}},[t._v("Edit")])]):t._e()]}}])})],1),t._v(" "),t.userValidate("row")?s("a",{attrs:{href:"#AddServices"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addServices_2"},on:{click:t.showServiceControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Service")])],1)]):t._e()],1),t._v(" "),s("div",{staticClass:"editCustContainer",style:{display:t.isdisplay},attrs:{id:"AddServices"}},[s("addServices",{attrs:{editRowData:t.rowData,toggleRequest:t.putrequest,visible:t.addServicesVisible},on:{displayNone:function(e){t.isdisplay=e},resetVisible:function(e){t.addServicesVisible=e}}})],1)],1),t._v(" "),s("Sidebar")],1)},staticRenderFns:[]};var dt=s("VU/8")(lt,ut,!1,function(t){s("dVNo")},"data-v-0e9323dc",null).exports,mt={props:["editRowData","toggleRequest"],data:function(){return{toggleData:!0,sellchecked:!1,selected:null,ServiceCategoryList:[],form:{service_code:"",description:"",allow_sell:!1,selling_price:"",category:""},show:!0,isSucess:!1}},created:function(){},watch:{isSucess:function(t){var e=this;!0===t&&(setTimeout(function(){e.isSucess=!1},1500),this.$router.go(0))}},methods:{onSubmit:function(t){},onReset:function(t){var e=this;t.preventDefault(),this.$emit("displayNone","none"),this.form.service_code="",this.form.description="",this.form.allow_sell=!1,this.form.category="",this.selling_price="",this.show=!1,this.$nextTick(function(){e.show=!0})}}},pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"titleConatainer"}},[s("b-row",{staticClass:"my-1"},[1==this.toggleData?s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Add Salesman")]):s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Edit Salesman")])])],1),t._v(" "),s("b-container",{staticClass:"card estimateContainer margBot",attrs:{fluid:"",id:"eDetails"}},[t.show?s("b-form",{attrs:{inline:""},on:{submit:t.onSubmit,reset:t.onReset}},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Name:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:"Enter Name"},model:{value:t.form.service_code,callback:function(e){t.$set(t.form,"service_code",e)},expression:"form.service_code"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Phone:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:" Enter Phone"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),s("b-col",{attrs:{sm:"3"}},[s("label",{staticClass:"label"},[t._v("\n          Email:\n          "),s("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("b-form-input",{staticClass:"rowInput ",attrs:{size:"md",type:"text",required:"",placeholder:"Enter Email"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._v(" "),s("div",{staticClass:"mt-3"})],1)],1),t._v(" "),s("b-row",{staticClass:"my-1"},[s("b-button",{staticClass:"yellow submitBtn",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("b-button",{staticClass:"yellow submitBtn resetBtn",attrs:{type:"reset"}},[t._v("Reset")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var ht={created:function(){},data:function(){return{isdisplay:"none",putrequest:!0,rowData:"",columns:["name","phone","email","actions"],tableData:[],options:{headings:{service_code:"Name",description:"Phone",category_str:"Email"}}}},mounted:function(){},components:{addSalesman:s("VU/8")(mt,pt,!1,function(t){s("MCm5")},"data-v-8850a1a4",null).exports,Header:C,Sidebar:_},methods:{showServiceControls:function(){this.isdisplay="block",this.putrequest=!0},edit:function(t){this.isdisplay="block",this.rowData=t},editButton:function(){this.putrequest=!1}}},vt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header"),t._v(" "),s("div",{staticClass:"Salesmen mainContentContainer"},[s("b-container",{staticClass:"card estimateContainer",attrs:{fluid:"",id:"salesmentitleConatainer"}},[s("b-row",{staticClass:"my-1"},[s("label",{staticClass:"label",attrs:{id:"titleLable"}},[t._v("Salesmen List")])])],1),t._v(" "),s("b-container",{staticClass:"card CustomerList estimateContainer margBot",attrs:{fluid:"",id:"titleConatainer"}},[s("a",{attrs:{href:"#AddSalesman"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addServices_1"},on:{click:t.showServiceControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Salesman")])],1)]),t._v(" "),s("b-row",{staticClass:"my-1 row justify-content-center"},[s("v-client-table",{attrs:{data:t.tableData,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var a=e.row;return[s("button",{staticClass:"editButton",on:{click:function(e){t.edit(a),t.editButton()}}},[s("a",{attrs:{href:"#AddSalesman"}},[t._v("Edit")])])]}}])})],1),t._v(" "),s("a",{attrs:{href:"#AddSalesman"}},[s("button",{staticClass:"btn yellow buttonDefSize btn-raised addButton",attrs:{id:"addServices_2"},on:{click:t.showServiceControls}},[s("b-icon-plus",{staticClass:"fa fa-plus customPlusIcon"}),t._v(" "),s("span",{staticClass:"BtnTxt"},[t._v("Salesman")])],1)])],1),t._v(" "),s("div",{staticClass:"editCustContainer",style:{display:t.isdisplay},attrs:{id:"AddSalesman"}},[s("addSalesman",{attrs:{editRowData:t.rowData,toggleRequest:t.putrequest},on:{displayNone:function(e){t.isdisplay=e}}})],1)],1),t._v(" "),s("Sidebar")],1)},staticRenderFns:[]};var ft=s("VU/8")(ht,vt,!1,function(t){s("bVRu")},"data-v-7c7fe394",null).exports;o.default.use(h.a);var _t=new h.a({routes:[{path:"/",name:"Login",component:q},{path:"/signup",name:"Signup",component:z},{path:"/home",name:"Home",component:I},{path:"/addcompany",name:"AddCompany",component:T},{path:"/Customers",name:"Customers",component:et},{path:"/Quotations",name:"Quotations",component:Y},{path:"/Products",name:"Products",component:nt},{path:"/Services",name:"Services",component:dt},{path:"/Salesmen",name:"Salesmen",component:ft},{path:"/AddEstimateCont",name:"Quotations",component:Y},{path:"/AddProducts",name:"Products",component:nt},{path:"/AddCustomers",name:"Customers",component:et},{path:"/AddServices",name:"Services",component:dt},{path:"/AddSalesman",name:"Salesmen",component:ft}]}),bt=s("424j");o.default.use(c.a);var gt=new c.a.Store({plugins:[Object(bt.a)({storage:window.sessionStorage})],state:{accessToken:null,loggingIn:!1,loginError:null,isActive:[{bool:!1},{bool:!1},{bool:!1},{bool:!1},{bool:!1},{bool:!1}],masterData:"",user:{userId:null,firstName:"",lastName:"",email:"",username:"",phoneNumber:"",address:"",isAdmin:"",company:[],token:"",loginToken:"",activeCompany:""}},mutations:{loginStart:function(t){return t.loggingIn=!0},loginStop:function(t,e){t.loggingIn=!1,t.loginError=e},updateAccessToken:function(t,e){t.accessToken=e},updateCompanies:function(t,e){t.user.company=e},updateUserId:function(t,e){t.user.userId=e},updateMasterData:function(t,e){t.masterData=e},authUser:function(t,e){t.user.userId=e.userId,t.user.username=e.username,t.user.firstName=e.firstName,t.user.lastName=e.lastName,t.user.phoneNumber=e.phoneNumber,t.user.company=e.company,t.user.isAdmin=e.isAdmin,t.user.email=e.email,t.user.token=e.token,t.user.loginToken=e.token,t.user.activeCompany=e.activeCompany,t.user.masterData=e.masterData},addCompany:function(t,e){t.user.company=e.company},clearAuthData:function(t){t.user.token=null,t.user.loginToken=null},setCompany:function(t,e){t.user.activeCompany=e},setToken:function(t,e){t.user.token=e},selectPage:function(t,e){t.isActive.forEach(function(t){t.bool=!1}),t.isActive[e].bool=!0}},actions:{selectPageAction:function(t,e){(0,t.commit)("selectPage",e)},masterData:function(t,e){var s=t.commit;u.a.get("users/masters/",{headers:{Authorization:"Bearer "+e}}).then(function(t){s("updateMasterData",t.data)}).catch(function(t){return console.log(t)})},signup:function(t,e){var s=t.commit,a=t.dispatch;u.a.post("/users/register/",{user_name:e.username,password:e.password,company:e.companyName,first_name:e.firstName,last_name:e.lastName,phone:e.phoneNumber,email:e.email}).then(function(t){s("authUser",{username:t.data.user_name,userId:t.data.user_Id,company:t.data.company,firstName:t.data.first_name,lastName:t.data.last_name,phoneNumber:t.data.phone,email:t.data.email})}).catch(function(t){console.log(t)}),a("login",{username:e.username,password:e.password})},login:function(t,e){var s=t.commit,a=t.dispatch;s("loginStart"),u.a.post("/users/login/",{username:e.username,password:e.password}).then(function(t){localStorage.setItem("refreshToken",t.data.refresh_token),localStorage.setItem("accessToken",t.data.token),localStorage.setItem("loginToken",t.data.token),localStorage.setItem("userId",t.data.id),localStorage.setItem("firstName",t.data.first_name),localStorage.setItem("username",t.data.first_name),localStorage.setItem("isAdmin",t.data.is_admin),localStorage.setItem("companies",E()(t.data.companies)),s("loginStop",null),s("updateAccessToken",t.data.token),s("updateUserId",t.data.id),console.log("login res",t),s("authUser",{firstName:t.data.first_name,username:t.data.first_name,lastName:t.data.last_name,email:t.data.email,phoneNumber:t.data.phone_number,token:t.data.token,loginToken:t.data.token,isAdmin:t.data.is_admin,company:t.data.companies,userId:t.data.id,activeCompany:t.data.companies[0].company_name}),localStorage.setItem("activeCompany",t.data.companies[0].company_name),u.a.defaults.baseURL="http://"+t.data.companies[0].company_name+".widgetor.com/quotation",a("masterData",t.data.token)}).catch(function(t){console.log("logon faild"),console.log(t)})},fetchAccessToken:function(t){var e=t.commit,s=t.dispatch;null!=localStorage.getItem("loginToken")&&(e("updateAccessToken",localStorage.getItem("loginToken")),s("masterData",localStorage.getItem("loginToken")),e("setToken",localStorage.getItem("loginToken"))),null!=localStorage.getItem("activeCompany")&&(e("setCompany",localStorage.getItem("activeCompany")),u.a.defaults.baseURL="http://"+localStorage.getItem("activeCompany")+".widgetor.com/quotation")},fetchCompanies:function(t){(0,t.commit)("updateCompanies",localStorage.getItem("companies"))},fetchUserId:function(t){(0,t.commit)("updateUserId",localStorage.getItem("userId"))},switch:function(t,e){var s=this,a=t.commit,i=t.dispatch;a("setCompany",e),localStorage.setItem("activeCompany",e),u.a.defaults.baseURL="http://widgetor.com/quotation/",u.a.post("users/switch_company/",{company_to:e},{headers:{Authorization:"Bearer "+this.state.user.loginToken}}).then(function(t){a("setToken",t.data.token),localStorage.setItem("accessToken",t.data.token),a("updateAccessToken",t.data.token),u.a.defaults.baseURL="http://"+s.state.user.activeCompany+".widgetor.com/quotation",i("masterData",t.data.token),s.$router.go()}).catch(function(t){u.a.defaults.baseURL="http://"+s.state.user.activeCompany+".widgetor.com/quotation",console.log(t)})},addCom:function(t,e){var s=t.commit;u.a.post("/users/new_company/",{company:e.newcompany}).then(function(t){s("addCompany",{company:t.data.company})}).catch(function(t){return console.log(t)})},logout:function(t){var e=t.commit;u.a.post("/users/logout/",{},{headers:{Authorization:"Bearer "+this.state.user.token}}).then(function(t){e("clearAuthData"),localStorage.clear(),_t.replace("/")}).catch(function(t){return console.log(t)})}},getters:{isAuthenticated:function(t){return""!==t.user.token},sendCompanies:function(t){return t.user.company},token:function(t){return t.user.token},userId:function(t){return t.user.userId},username:function(t){return t.user.username}}}),Ct=s("Tqaz"),wt=(s("Jmt5"),s("9M+g"),s("M0p0")),yt=s("e9ss"),St=s("9QV6"),xt=s.n(St),kt=s("pvO8"),Dt=s.n(kt),$t=s("rifk"),Tt=s.n($t);s("iq7p"),o.default.use(Dt.a),o.default.use(Tt.a),o.default.use(wt.a),o.default.use(Ct.a),o.default.use(Ct.b),s("Q529"),o.default.use(yt.ClientTable),o.default.use(xt.a),u.a.defaults.baseURL="http://widgetor.com/quotation",u.a.defaults.headers.get.Accepts="application/json";var Bt=u.a.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)}),Lt=u.a.interceptors.response.use(function(t){return t},function(t){return i.a.reject(t)});u.a.interceptors.request.eject(Bt),u.a.interceptors.response.eject(Lt),o.default.config.productionTip=!1,new o.default({el:"#app",router:_t,store:gt,components:{App:p},template:"<App/>"})},Q529:function(t,e){},"RK/m":function(t,e){},Z6Y9:function(t,e){},bVRu:function(t,e){},ccfr:function(t,e){},dVNo:function(t,e){},dhsO:function(t,e){},fLN4:function(t,e){},iq7p:function(t,e){},nkgR:function(t,e){},plMp:function(t,e){},qoxp:function(t,e){},t0To:function(t,e){},uN8E:function(t,e){},wERl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.002c96ddeb001be8b724.js.map